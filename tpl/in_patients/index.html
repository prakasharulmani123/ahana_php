<div class="bg-light lter b-b wrapper-md">
    <h1 class="m-n h3">In-Patient</h1>
</div>

<div class="wrapper-md" ng-controller="InPatientsController" ng-init="loadInPatientsList()">
    <div class="panel panel-default">
        <div class="row wrapper">
            <div class="col-sm-5 m-b-xs">
                <button class="btn btn-sm btn-grey" ng-click="loadInPatientsList()"> 
                    &nbsp; &nbsp; <i class="fa fa-repeat"></i> &nbsp; &nbsp; 
                </button>
            </div>
            <div class="col-sm-4"></div>
            <div class="col-sm-3 pull-right text-right">
                <h4 class="label bg-primary"> <b> Census: {{displayedCollection.length}} </b></h4>
            </div>
        </div>

        <div class="table-responsive in-patient-table">
            <table st-table="displayedCollection"  st-safe-src="rowCollection" class="table table-striped b-t b-light">
                <thead>
                    <tr>
                        <th style="width:60px;">&nbsp;</th>
                        <th st-sort="patient_firstname">Patient</th>
                        <th>Case sheet#</th>
                        <th>Category</th>
                        <th>Admission Date</th>
                        <th>ROOM#</th>
                        <th>consultant</th>
                        <th style="width:250px;"> Actions </th>
                    </tr>
                </thead>
                <tbody ng-hide="isLoading">
                    <tr ng-if="displayedCollection.length == 0">
                        <td colspan="7" class="text-center">
                            No I/P records
                        </td>
                    </tr>
                    <tr ng-repeat="row in displayedCollection| orderBy: patient_firstname">
                        <td align="center" valign="middle">
                            <div style="margin-top: -10px; position: absolute;">
                            <img ng-if="row.patient.hasalert" class="pull-left" src="img/symbol1.png"  alt="" tooltip="Has Alert" tooltip-trigger tooltip-animation="false" tooltip-placement="right"  />
                            <img ng-if="row.patient.address.incomplete_profile" class="pull-left" src="img/question.png"  alt="" tooltip="Incomplete Profile" tooltip-trigger tooltip-animation="false" tooltip-placement="right" />
                            </div>
                        </td>
                        <td>
                            <img ng-if="$even" class="pull-left" alt="" width="49" height="49" src="{{row.patient.patient_image ? row.patient.patient_image : 'img/man-icon.png'}}">
                            <img ng-if="$odd" class="pull-left" alt="" width="49" height="49" src="{{row.patient.patient_image ? row.patient.patient_image : 'img/man-icon2.png'}}">
                            <a ui-sref="patient.view({id: row.patient.patient_guid})" tooltip="{{row.patient.fullcurrentaddress}}">
                                {{row.patient.fullname}} 
                            </a>({{row.patient.patient_age}}y) <br/> 
                            {{row.patient.patient_int_code}}
                        </td>
                        <td>{{row.patient.activeCasesheetno}}</td>
                        <td valign="middle">
                            <div ng-if="row.patient.patient_category" class="category_badge" style="background-color: {{row.patient.patient_category_color}}">
                                {{row.patient.patient_category | uppercase}}{{row.patient.billing_type}}
                            </div>
                        </td>
                        <td>
                            {{row.doe}} <br/>  <span class="text-muted"> {{row.doeTimeago}} </span>
                        </td>
                        <td>{{row.room_name}} <br/> <span class="text-muted"> {{row.room_type_name}} </span> </td>
                        <td>{{row.patient.consultant_name}}</td>
                        <td align="left">
<!--                            <a ui-sref="patient.view({id: row.patient.patient_guid})">
                                <img src="img/small-icon1.png"  alt="" tooltip="Details" tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>-->

                            <a ui-sref="patient.procedure({id: row.patient.patient_guid})">
                                <img src="img/medi-icon1.png"  alt="" tooltip="Procedures" tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.encounter({id: row.patient.patient_guid})">
                                <img src="img/medi-icon2.png"  alt="" tooltip="Encounters " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.notes({id: row.patient.patient_guid})">
                                <img src="img/medi-icon3.png"  alt="" tooltip=" Notes " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.prescription({id: row.patient.patient_guid})">
                                <img src="img/medi-icon4.png"  alt="" tooltip="Prescriptions " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.consultant({id: row.patient.patient_guid})">
                                <img src="img/medi-icon5.png"  alt="" tooltip="Consultation " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

<!--                            <a href="#">
                                <img src="img/small-icon7.png"  alt="" tooltip="Documents " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.alert({id: row.patient.patient_guid})">
                                <img src="img/small-icon8.png"  alt="" tooltip="Alerts  " tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>

                            <a ui-sref="patient.billing({id: row.patient.patient_guid})">
                                <img src="img/small-icon9.png"  alt="" tooltip="Billing" tooltip-trigger tooltip-animation="false" tooltip-placement="bottom" />
                            </a>-->
                        </td>
                    </tr>
                </tbody>
                <tbody ng-show="isLoading">
                    <tr>
                        <td colspan="7" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="7" class="text-center">
                            <div st-pagination="" st-items-by-page="itemsByPage" st-displayed-pages="7"></div>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>